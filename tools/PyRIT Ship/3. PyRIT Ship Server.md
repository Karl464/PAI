# âš™ï¸ PyRIT Server â€“ Guide

This guide walks you through installing and configuring the **PyRIT-Ship server** with OpenAI integration.

---

## âœ… Requirements

- **Python 3.11.x**  
  ðŸ“¥ [Download Python 3.11.9 â€“ Official Release](https://www.python.org/downloads/release/python-3119/)  
- **Git** (to clone the repository)  
- **Active OpenAI API Key** with sufficient credits ($5+ recommended)  

---

## ðŸ§± Step-by-Step Configuration

### 1ï¸âƒ£ Clone the PyRIT Ship Repository

Open PowerShell or your terminal and run:

```powershell
git clone https://github.com/microsoft/PyRIT-Ship.git
cd PyRIT-Ship
```

---

### 2ï¸âƒ£ Create and Activate a Virtual Environment

#### ðŸ”§ Create the environment:
```powershell
python.exe -m venv myenv
```

Or specify full path if needed:
```powershell
& "C:\Python\Python-3.11.x\python.exe" -m venv myenv
```

#### ðŸš€ Activate the environment:
```powershell
.\myenv\Scripts\Activate.ps1
```

#### âœ… Validate the Python path:
```powershell
python -c "import sys; print(sys.executable)"
```

---

### 3ï¸âƒ£ Install Required Packages

Inside the activated environment, run:

```powershell
pip install pyrit==0.9.0 flask python-dotenv
```

> ðŸ“Œ Pinning `pyrit` to version **0.9.0** ensures compatibility with the tested setup.

---

### 4ï¸âƒ£ Configure OpenAI API Access

Create a `.env` file in the **root of your project** with the following content:

```env
OPENAI_CHAT_MODEL="gpt-4o"
OPENAI_CHAT_ENDPOINT="https://api.openai.com/v1/chat/completions"
OPENAI_CHAT_KEY="sk-proj-xxxxxxxxxxxxxxxxxxxxxx"
```

ðŸ” Ensure your API key is valid and has sufficient quota.

---

### 5ï¸âƒ£ Update the PyRIT Initialization Function

Edit `PyRIT-Ship\pyritship\app.py` and modify the function `initialize_aoai_chat_target` to use the environment variables:

```python
def initialize_aoai_chat_target():
    initialize_pyrit(memory_db_type=IN_MEMORY)

    aoai_chat_target = OpenAIChatTarget(
        model_name=os.environ.get("OPENAI_GPT4O_CHAT_MODEL"),
        endpoint=os.environ.get("OPENAI_GPT4O_CHAT_ENDPOINT"),
        api_key=os.environ.get("OPENAI_GPT4O_CHAT_KEY")
    )
    return aoai_chat_target
```

---

### 6ï¸âƒ£ Launch the PyRIT Server

From the **PyRIT-Ship directory**, run:

```powershell
python ./pyritship/app.py
```

If successful, the server will start and listen for incoming requests.

---

## ðŸ“¦ Optional Enhancements

- **requirements.txt**:  
  Save dependencies for reproducibility:
  ```bash
  pip freeze > requirements.txt
  ```

- **Auto-load `.env`**:  
  Ensure `python-dotenv` is installed so environment variables load automatically.

- **Token usage tracking**:  
  Document API usage and quota for students to understand cost and limits.

- **Troubleshooting tips**:  
  - If the server fails to start, re-check your `.env` file formatting.  
  - Ensure the virtual environment is active before running `pip install`.  
  - Use `gradlew.bat` or pinned versions if dependency conflicts occur.  
